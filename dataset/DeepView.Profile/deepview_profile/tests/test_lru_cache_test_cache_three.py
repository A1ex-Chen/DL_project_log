def test_cache_three(self):
    cache = lru.LRUCache(max_size=3)
    self.assertIsNone(cache.query(1))
    cache.add(1, 1)
    cache.add(2, 2)
    cache.add(3, 3)
    self.assertEqual(cache.query(1), 1)
    self.assertEqual(cache.query(3), 3)
    self.assertEqual(cache.query(2), 2)
    cache.add(4, 4)
    self.assertIsNone(cache.query(1))
    self.assertEqual(cache.query(4), 4)
    self.assertEqual(cache.query(3), 3)
    self.assertEqual(cache.query(2), 2)
    cache.add(5, 5)
    self.assertIsNone(cache.query(4))
    self.assertEqual(len(cache._cache_by_key), 3)
    self.assertEqual(cache._cache_by_use.size, 3)
